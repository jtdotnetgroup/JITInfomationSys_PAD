(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c93a6"],{"57f4":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fullscreen"},[n("tableHeader",{staticClass:"header",attrs:{title:t.title,items:t.tabItems},on:{tabChange:t.handelTabChange}}),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tabledata,border:"",stripe:""}},[t._l(t.columnHeader,function(t){return n("el-table-column",{key:t.id,attrs:{prop:t.id,label:t.label,width:t.width}})}),n("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.funmenu,function(a){return n("el-button",{directives:[{name:"show",rawName:"v-show",value:a.show,expression:"item.show"}],key:a.num,staticStyle:{"text-align":"center"},attrs:{plain:"",round:"",type:a.type},on:{click:function(n){return t.handle(a.num,e.$index,e.row)}}},[t._v(t._s(a.title))])})}}])})],2),n("Paging",{ref:"Paging",attrs:{PageSize:t.pageSize,PageIndex:t.currentPage,TotalNum:t.totalNum},on:{Refresh:t.GetData,RefreshPage:t.RefreshPage}})],1)},i=[],l=(n("ac6a"),n("c4bb")),o={receive:[{id:"派工单号",label:"派工单号",width:220,sort:!1,align:"center"},{id:"班次",label:"班次",width:120,sort:!1,align:"center"},{id:"生产日期",label:"派工日期",width:120,sort:!1,align:"center"},{id:"产品名称",label:"产品",width:100,sort:!1,align:"center"},{id:"工序",label:"工序",width:100,sort:!1,align:"center"},{id:"汇报",label:"汇报数",width:100,sort:!1,align:"center"},{id:"合格数量",label:"合格",width:100,sort:!1,align:"center"},{id:"不合格数量",label:"不合格",width:100,sort:!1,align:"center"}],report:[{id:"派工单号",label:"派工单号",width:220,sort:!1,align:"center"},{id:"班次",label:"班次",width:120,sort:!1,align:"center"},{id:"生产日期",label:"生产日期",width:120,sort:!1,align:"center"},{id:"状态",label:"状态",width:100,sort:!1,align:"center"},{id:"产品名称",label:"产品",sort:!1,align:"center"},{id:"工序",label:"工序",width:100,sort:!1,align:"center"},{id:"汇报",label:"汇报数",width:80,sort:!1,align:"center"},{id:"合格数量",label:"合格",width:80,sort:!1,align:"center"},{id:"不合格数量",label:"不合格",width:80,sort:!1,align:"center"}]},r=o,s={name:"IPQC",data:function(){return{title:"质量检验",tabItems:[{title:"待检验",value:"DHB",count:0,key:"ZLJYDJY"},{title:"已检验",value:"YZJ",count:0,key:"ZLJYYJY"}],tabledata:[],loading:!1,currentPage:1,pageSize:10,totalNum:0,tabvalue:"DHB",tableColumns:r,funmenu:[{type:"",num:0,title:"检验",show:!0,ShowWhe:["DHB"]},{type:"success",num:1,title:"已检验",show:!0,ShowWhe:["DHB"]}]}},components:{tableHeader:function(){return n.e("chunk-9e626158").then(n.bind(null,"9962"))},Paging:function(){return n.e("chunk-3f472d77").then(n.bind(null,"3881"))}},methods:{UpdCount:function(){var t=this.$store.state.TaskQty.TaskQty;this.tabItems.forEach(function(e){t.forEach(function(t){e.key===t.strKey&&(e.count=t.total)})})},RefreshPage:function(t){this.currentPage=t.PageIndex},handelTabChange:function(t){this.tabvalue=t,this.GetData(),this.showmenu()},sizeChange:function(t){},currentChange:function(t){},handle:function(t,e,n){var a=this,i={FID:n.fid,Step:n.工序,"汇报数":n.汇报,FOperID:n.FOperID,FBillNo:n.FBillNo,FItemID:n.FItemID,F_102:n.F_102};switch(1*t){case 0:a.$router.push({name:"IPQCInspectionDetails",query:i});break;case 1:this.$confirm("确定已检验吗?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.ZJCompleted(i)}).catch(function(){});break;default:break}},ZJCompleted:function(t){var e=this;t.FStates=2,e.loading=!0,Object(l["e"])("ICMODispBill/UpdateFStatus",t).then(function(t){200===t.status&&(e.GetData(),e.$message({message:"保存成功",type:"success"}))}).catch(function(){e.$message.error("操作失败，请稍后重试！")}).finally(function(){setTimeout(function(){e.loading=!1},2e3),e.$store.dispatch("GetAllTaskQty",{StrKey:"*"}),e.UpdCount()})},GetData:function(){var t=this,e="DHB"===this.tabvalue?1:2,n={"操作者":"1",FStatus:e,FClosed:null,Sorting:"FClosed",SkipCount:(this.currentPage-1)*this.pageSize,MaxResultCount:this.pageSize},a=this.$loading({lock:!0,text:"数据加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(l["f"])("VW_MODispBillList/JYZGetAll",n).then(function(e){var n=e.data.result;t.totalNum=n.totalCount;var i=[];n.items.forEach(function(t){var e={};e.fTranType=t.fTranType,e.派工单号=t.派工单号,e.班次=t.班次,e.设备=t.设备,e.产品名称=t.产品名称,e.产品名称=t.产品名称,e.规格型号=t.规格型号,e.工序=t.工序,e.生产日期=t.生产日期,e.派工=t.派工数量,e.汇报=t.汇报数量,e.合格数量=t.合格数量,e.不合格数量=t.不合格数量,e.状态=t.派工数量<=t.合格数量?"已完成":"未完成",e.fid=t.fid,e.FOperID=t.fOperID,e.FBillNo=t.派工单号,e.FItemID=t.fItemID,e.F_102=t.f_102,i.push(e)}),t.tabledata=i,t.tabItems.forEach(function(e){e.count=e.value===t.tabvalue?n.totalCount:e.count}),a.close()}).catch(function(){a.close()})},showmenu:function(){var t=this;this.funmenu.forEach(function(e){e.show=e.ShowWhe.indexOf(t.tabvalue)>=0})}},created:function(){this.showmenu()},mounted:function(){this.GetData(),this.UpdCount()},computed:{columnHeader:function(){switch(this.tabvalue){case"DHB":return this.tableColumns.report;case"YZJ":return this.tableColumns.report}return""}}},u=s,c=n("2877"),d=Object(c["a"])(u,a,i,!1,null,"7c72ec84",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0c93a6.d8c8f469.js.map