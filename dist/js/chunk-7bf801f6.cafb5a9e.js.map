{"version":3,"sources":["webpack:///./src/views/DispatchedWork/index.vue?ea01","webpack:///./src/views/DispatchedWork/index.vue?f90b","webpack:///./src/views/DispatchedWork/tableColumns.js","webpack:///src/views/DispatchedWork/index.vue","webpack:///./src/views/DispatchedWork/index.vue?7ef4","webpack:///./src/views/DispatchedWork/index.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","modifiers","fullscreen","lock","staticClass","attrs","title","items","tabItems","on","tabChange","handelTabChange","data","tabledata","border","stripe","row-class-name","tableRowClassName","_l","col","key","id","prop","align","label","formatter","width","fixed","scopedSlots","_u","fn","scope","item","num","staticStyle","text-align","plain","round","type","click","$event","handle","$index","row","_v","_s","ref","PageSize","pageSize","PageIndex","currentPage","TotalNum","totalNum","Refresh","GetData","RefreshPage","addSuccess","staticRenderFns","columns","receive","sort","column","cellValue","index","moment","生产日期","format","制单日期","计划开工日期","计划完工日期","report","DispatchedWorkvue_type_script_lang_js_","fullscreenLoading","count","tabvalue","tableColumns","funmenu","show","ShowWhe","components","tableHeader","e","then","bind","OpenWork","AbnormalReportList","Picking","Report","ReportDetailed","Paging","methods","_ref","rowIndex","UpdCount","TaskQty","$store","state","forEach","tmp","strKey","total","_this2","_this","obj","FFinishAuxQty","汇报","FID","$refs","$confirm","confirmButtonText","cancelButtonText","Object","mission","fid","res","success","$message","message","error","setTimeout","catch","finally","dispatch","StrKey","FSrcID","fsrcID","Show","showmenu","sizeChange","currentChange","_this3","操作者","FStatus","FClosed","Sorting","SkipCount","MaxResultCount","loading","$loading","text","spinner","background","result","totalCount","close","_this4","indexOf","created","mounted","computed","columnHeader","watch","views_DispatchedWorkvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-7bf801f6.cafb5a9e.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(_vm.fullscreenLoading),expression:\"fullscreenLoading\",modifiers:{\"fullscreen\":true,\"lock\":true}}],staticClass:\"fullscreen\"},[_c('tableHeader',{staticClass:\"header\",attrs:{\"title\":_vm.title,\"items\":_vm.tabItems},on:{\"tabChange\":_vm.handelTabChange}}),_c('el-table',{attrs:{\"data\":_vm.tabledata,\"border\":\"\",\"stripe\":\"\",\"row-class-name\":_vm.tableRowClassName}},[_vm._l((_vm.columnHeader),function(col){return _c('el-table-column',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],key:col.id,attrs:{\"prop\":col.id,\"align\":col.align,\"label\":col.label,\"formatter\":col.formatter,\"width\":col.width}})}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"fixed\":\"right\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((_vm.funmenu),function(item){return _c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.show),expression:\"item.show\"}],key:item.num,staticStyle:{\"text-align\":\"center\"},attrs:{\"plain\":\"\",\"round\":\"\",\"type\":item.type},on:{\"click\":function($event){return _vm.handle(item.num,scope.$index, scope.row)}}},[_vm._v(_vm._s(item.title))])})}}])})],2),_c('Paging',{ref:\"Paging\",attrs:{\"PageSize\":_vm.pageSize,\"PageIndex\":_vm.currentPage,\"TotalNum\":_vm.totalNum},on:{\"Refresh\":_vm.GetData,\"RefreshPage\":_vm.RefreshPage}}),_c('OpenWork',{ref:\"OpenWork\",on:{\"addSuccess\":_vm.GetData}}),_c('AbnormalReportList',{ref:\"AbnormalReportList\",on:{\"addSuccess\":_vm.GetData}}),_c('Picking',{ref:\"Picking\",on:{\"addSuccess\":_vm.GetData}}),_c('Report',{ref:\"Report\",on:{\"addSuccess\":_vm.GetData}}),_c('ReportDetailed',{ref:\"ReportDetailed\",on:{\"addSuccess\":_vm.GetData}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import moment from 'moment'\r\n\r\nconst columns = {\r\n  receive: [{\r\n    id: '派工单号',\r\n    label: '派工单号',\r\n    width: 220,\r\n    sort: true,\r\n    align: 'center'\r\n  },\r\n  {\r\n    id: '设备',\r\n    label: '设备',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center'\r\n  },\r\n  {\r\n    id: '班次',\r\n    label: '班次',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center'\r\n  },\r\n  {\r\n    id: '生产日期',\r\n    label: '生产日期',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center',\r\n    formatter: function (row, column, cellValue, index) {\r\n      return moment(row.生产日期).format('YYYY-MM-DD')\r\n    }\r\n  },\r\n  {\r\n    id: '制单日期',\r\n    label: '制单日期',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center',\r\n    formatter: function (row, column, cellValue, index) {\r\n      return moment(row.制单日期).format('YYYY-MM-DD')\r\n    }\r\n  },\r\n  {\r\n    id: '产品名称',\r\n    label: '产品',\r\n    width: 220,\r\n    sort: true,\r\n    align: 'center'\r\n  },\r\n  {\r\n    id: '工序',\r\n    label: '工序',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center'\r\n  },\r\n\r\n  {\r\n    id: '计划开工/完工',\r\n    label: '计划开工/完工',\r\n    sort: true,\r\n    align: 'center',\r\n    formatter: function (row, column, cellValue, index) {\r\n      return moment(row.计划开工日期).format('YYYY-MM-DD') + '/' + moment(row.计划完工日期).format('YYYY-MM-DD')\r\n    }\r\n  },\r\n  {\r\n    id: '派工数量',\r\n    label: '派工',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center'\r\n  }, {\r\n    id: 'fPackQty',\r\n    label: '包装数',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center'\r\n  }\r\n  ],\r\n  report: [{\r\n    id: '派工单号',\r\n    label: '派工单号',\r\n    width: 250,\r\n    sort: true,\r\n    align: 'center'\r\n  },\r\n  {\r\n    id: '设备',\r\n    label: '设备',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center'\r\n  },\r\n  {\r\n    id: '班次',\r\n    label: '班次',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center'\r\n  }, {\r\n    id: '生产日期',\r\n    label: '生产日期',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center',\r\n    formatter: function (row, column, cellValue, index) {\r\n      return moment(row.生产日期).format('YYYY-MM-DD')\r\n    }\r\n  },\r\n  {\r\n    id: '制单日期',\r\n    label: '制单日期',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center',\r\n    formatter: function (row, column, cellValue, index) {\r\n      return moment(row.制单日期).format('YYYY-MM-DD')\r\n    }\r\n  },\r\n  {\r\n    id: '产品名称',\r\n    label: '产品',\r\n    width: 220,\r\n    sort: true,\r\n    align: 'center'\r\n  },\r\n  {\r\n    id: '工序',\r\n    label: '工序',\r\n    sort: true,\r\n    align: 'center'\r\n  },\r\n  {\r\n    id: '派工数量',\r\n    label: '派工数',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center'\r\n  },\r\n  {\r\n    id: 'fPackQty',\r\n    label: '包装数',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center'\r\n  },\r\n  {\r\n    id: '汇报数量',\r\n    label: '汇报数',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center'\r\n  },\r\n  {\r\n    id: '合格数量',\r\n    label: '合格',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center'\r\n  },\r\n  {\r\n    id: '不合格数量',\r\n    label: '不合格',\r\n    width: 120,\r\n    sort: true,\r\n    align: 'center'\r\n  }\r\n  ]\r\n}\r\n\r\nexport default columns\r\n","\r\n<template>\r\n  <!--主体-->\r\n  <div class=\"fullscreen\" v-loading.fullscreen.lock=\"fullscreenLoading\">\r\n    <!--头部-->\r\n    <tableHeader class=\"header\" :title=\"title\" :items=\"tabItems\" @tabChange=\"handelTabChange\" />\r\n    <!--表格-->\r\n    <el-table :data=\"tabledata\" border stripe :row-class-name=\"tableRowClassName\">\r\n      <el-table-column v-for=\"col in columnHeader\" :prop=\"col.id\" :key=\"col.id\" :align=\"col.align\" :label=\"col.label\" \r\n      :formatter=\"col.formatter\"\r\n      :width=\"col.width\" v-show=\"false\"></el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\" fixed=\"right\" width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button style=\"text-align: center\" plain round v-for=\"item in funmenu\" v-show=\"item.show\"\r\n           :key=\"item.num\" @click=\"handle(item.num,scope.$index, scope.row)\" :type=\"item.type\">{{item.title}}</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- <el-pagination\r\n      @size-change=\"sizeChange\"\r\n      @current-change=\"currentChange\"\r\n      :current-page=\"currentPage\"\r\n      :page-sizes=\"[20, 40, 80, 100]\"\r\n      :page-size=\"pageSize\"\r\n      layout=\"prev, pager, next\"\r\n      :total=\"totalNum\"\r\n      background\r\n    ></el-pagination>-->\r\n    <!-- 底部分页 -->\r\n    <Paging :PageSize=\"pageSize\" :PageIndex=\"currentPage\" :TotalNum=\"totalNum\" @Refresh=\"GetData\" @RefreshPage=\"RefreshPage\" ref=\"Paging\" />\r\n    <!-- 底部分页 -->\r\n    <!--其他页面模板-->\r\n    <OpenWork ref=\"OpenWork\" @addSuccess=\"GetData\" />\r\n    <AbnormalReportList ref=\"AbnormalReportList\" @addSuccess=\"GetData\" />\r\n    <Picking ref=\"Picking\" @addSuccess=\"GetData\" />\r\n    <Report ref=\"Report\" @addSuccess=\"GetData\" />\r\n    <ReportDetailed ref=\"ReportDetailed\" @addSuccess=\"GetData\" />\r\n    <!--弹框-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 数据处理\r\nimport { GetAll, DataAddOrPUT } from \"@/api/mission\";\r\n// 表格列\r\nimport columns from \"./tableColumns.js\";\r\n// 派工单页面\r\nexport default {\r\n  name: \"DispatchedWork\",\r\n  // 初始化数据\r\n  data() {\r\n    return {\r\n      fullscreenLoading: false,\r\n      title: \"派工任务\", // 标题\r\n      tabItems: [\r\n        { title: \"待开工\", value: \"receive\", count: 0, key: \"PGRW\" },\r\n        { title: \"待汇报\", value: \"report\", count: 0, key: \"PGRWDHB\" }\r\n      ],\r\n      tabledata: [], // 数据集合\r\n      currentPage: 1, // 当前页数\r\n      pageSize: 20, // 页容量\r\n      totalNum: 0, // 总条数\r\n      tabvalue: \"receive\", // 选中显示卡\r\n      tableColumns: columns, // 表格的列\r\n      funmenu: [\r\n        {\r\n          type: \"primary\",\r\n          num: 2,\r\n          title: \"开工\",\r\n          show: true,\r\n          ShowWhe: [\"receive\"]\r\n        },\r\n        {\r\n          type: \"danger\",\r\n          num: 3,\r\n          title: \"异常\",\r\n          show: false,\r\n          ShowWhe: [\"report\", \"receive\"]\r\n        },\r\n        {\r\n          type: \"\",\r\n          num: 4,\r\n          title: \"汇报\",\r\n          show: true,\r\n          ShowWhe: [\"report\"]\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  // 组件\r\n  components: {\r\n    tableHeader: () => import(\"@/components/tablePageHeader.vue\"),\r\n    OpenWork: () => import(\"./OpenWork\"),\r\n    AbnormalReportList: () => import(\"./AbnormalReportList\"),\r\n    Picking: () => import(\"./Picking\"),\r\n    Report: () => import(\"./Report\"),\r\n    ReportDetailed: () => import(\"./ReportDetailed\"),\r\n    Paging: () => import(\"@/components/Common/Paging.vue\")\r\n  },\r\n  // 声明方法\r\n  methods: {\r\n    tableRowClassName ({ row, rowIndex }) {\r\n\r\n      if (!!row['isYC']) {\r\n        return 'error-row'\r\n      }\r\n      return ''\r\n    },\r\n    // 标题数量\r\n    UpdCount() {\r\n      var TaskQty = this.$store.state.TaskQty.TaskQty;\r\n      this.tabItems.forEach(tmp => {\r\n        TaskQty.forEach(item => {\r\n          if (tmp.key === item.strKey) {\r\n            tmp.count = item.total;\r\n          }\r\n        });\r\n      });\r\n    },\r\n    RefreshPage(value) {\r\n      this.currentPage = value.PageIndex;\r\n    },\r\n    Refresh() {\r\n      this.GetData();\r\n    },\r\n    // 点击操作\r\n    handle: function(type, index, row) {\r\n      var _this = this;\r\n      var obj = {};\r\n      switch (type) {\r\n        // 汇报\r\n        case 0:\r\n          obj = { FFinishAuxQty: row.汇报 * 1, FID: row.FID };\r\n          _this.$refs.Report.show(obj);\r\n          break;\r\n        // 领料\r\n        case 1:\r\n          obj = { id: 0 };\r\n          _this.$refs.Picking.show(obj);\r\n          break;\r\n        // 开工\r\n        case 2:\r\n          // obj = { FID: row.FID, FSrcID: row.FSrcID };\r\n          // _this.$refs.OpenWork.show(obj);\r\n          this.$confirm(\"是否确认开工?\", \"提示\", {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"warning\"\r\n          })\r\n            .then(() => {\r\n              _this.fullscreenLoading = true;\r\n              // console.log(row)\r\n              DataAddOrPUT(\"ICMODispBill/OpenWork\", { FID: row.fid })\r\n                .then(res => {\r\n                  if (res.data.success) {\r\n                    this.$message({\r\n                      message: \"标记开工成功\",\r\n                      type: \"success\"\r\n                    });\r\n                    _this.GetData();\r\n                  } else {\r\n                    this.$message.error(\"标记开工失败\");\r\n                    setTimeout(() => {}, 2000);\r\n                  }\r\n                })\r\n                .catch(function() {\r\n                  setTimeout(() => {}, 2000);\r\n                })\r\n                .finally(() => {\r\n                  setTimeout(() => {\r\n                    _this.fullscreenLoading = false;\r\n                  }, 2000);\r\n                  _this.$store.dispatch(\"GetAllTaskQty\", { StrKey: \"*\" });\r\n                  _this.UpdCount();\r\n                });\r\n            })\r\n            .catch(() => {});\r\n          break;\r\n        // 异常\r\n        case 3:\r\n          obj = { FID: row.fid, FSrcID: row.fsrcID };\r\n          _this.$refs.AbnormalReportList.Show(obj);\r\n          break;\r\n        // 汇报明细\r\n        case 4:\r\n          // obj = { ICMODispBillID: row.FID, FSrcID: row.FSrcID }\r\n          _this.$refs.ReportDetailed.Show(row);\r\n          break;\r\n        // 默认提示功能尚未开发\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    handelTabChange(value) {\r\n      this.tabvalue = value;\r\n      this.showmenu();\r\n      this.GetData();\r\n    },\r\n    sizeChange(value) {},\r\n    currentChange(value) {},\r\n    GetData() {\r\n      var _this = this;\r\n      _this.tabledata = [];\r\n      var obj = {\r\n        操作者: \"1\",\r\n        FStatus: this.tabvalue === \"receive\" ? 0 : 1,\r\n        FClosed: null,\r\n        Sorting: \"FClosed\",\r\n        SkipCount: (this.currentPage - 1) * this.pageSize,\r\n        MaxResultCount: this.pageSize\r\n      };\r\n      const loading = this.$loading({\r\n        lock: true,\r\n        text: \"数据加载中\",\r\n        spinner: \"el-icon-loading\",\r\n        background: \"rgba(0, 0, 0, 0.7)\"\r\n      });\r\n\r\n      GetAll(\"VW_MODispBillList/GetAll\", obj)\r\n        .then(res => {\r\n          if (res.success) {\r\n          }\r\n          var result = res.data.result; // 集合\r\n          this.totalNum = result.totalCount; // 总长度\r\n\r\n          var TableList = []; // 集合\r\n\r\n          let cols= this.tabvalue === \"receive\"?this.tableColumns.receive:this.tableColumns.report;\r\n          \r\n          // 遍历返回集合 选取需要的\r\n          // result.items.forEach(item => {\r\n          //   var TabaleObj = {}; // 对象\r\n\r\n          //   // columns.forEach(col => {\r\n              \r\n          //   // });\r\n\r\n          //   // TabaleObj.fTranType = item.fTranType;\r\n          //   TabaleObj.派工单号 = item.派工单号;\r\n          //   TabaleObj.设备 = item.设备;\r\n          //   TabaleObj.产品名称 = item.产品名称;\r\n          //   TabaleObj.产品名称 = item.产品名称;\r\n          //   TabaleObj.规格型号 = item.规格型号;\r\n          //   TabaleObj.工序 = item.工序;\r\n          //   TabaleObj.生产日期 = this.$moment(item.生产日期).format('YYYY-MM-DD');\r\n          //   TabaleObj.制单日期=this.$moment(item.fBillTime).format('YYYY-MM-DD');\r\n          //   TabaleObj.派工 = item.派工数量;\r\n          //   TabaleObj.汇报 = item.汇报数量;\r\n          //   TabaleObj.合格 = item.合格数量;\r\n          //   TabaleObj.不合格 = item.不合格数量;\r\n          //   TabaleObj.FID = item.fid;\r\n          //   TabaleObj.FSrcID = item.fsrcID;\r\n          //   TabaleObj.班次 = item.班次;\r\n          //   TabaleObj.isYC=item.isYC;\r\n          //   TableList.push(TabaleObj);\r\n          // });\r\n          // 重新渲染列表\r\n          // this.tabledata = TableList;\r\n          this.tabledata=result.items;\r\n          //\r\n          this.tabItems.forEach(item => {\r\n            item.count =\r\n              item.value === _this.tabvalue ? result.totalCount : item.count;\r\n          });\r\n        })\r\n        .catch(function() {})\r\n        .finally(() => {\r\n          loading.close();\r\n        });\r\n    },\r\n    // 显示菜单\r\n    showmenu() {\r\n      this.funmenu.forEach(item => {\r\n        item.show = item.ShowWhe.indexOf(this.tabvalue) >= 0;\r\n      });\r\n    }\r\n  },\r\n  // 页面渲染前 执行\r\n  created: function() {\r\n    this.UpdCount();\r\n  },\r\n  // 页面渲染后 执行\r\n  mounted: function() {\r\n    this.GetData();\r\n    this.showmenu();\r\n  },\r\n  // 页面渲染后 执行\r\n  computed: {\r\n    columnHeader() {\r\n      switch (this.tabvalue) {\r\n        case \"receive\":\r\n          return this.tableColumns.receive;\r\n        // break\r\n        case \"report\":\r\n          return this.tableColumns.report;\r\n        // break\r\n        default:\r\n          return \"\";\r\n      }\r\n    }\r\n  },\r\n  //\r\n  watch: {}\r\n};\r\n</script>\r\n<style>\r\n.el-table .error-row {\r\n  background: #f05b5b;\r\n  color: #fff\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7f08d021&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}