(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bb36b2b"],{"11e9":function(t,e,r){var a=r("52a7"),n=r("4630"),o=r("6821"),i=r("6a99"),c=r("69a8"),l=r("c69a"),u=Object.getOwnPropertyDescriptor;e.f=r("9e1e")?u:function(t,e){if(t=o(t),e=i(e,!0),l)try{return u(t,e)}catch(r){}if(c(t,e))return n(!a.f.call(t,e),t[e])}},"2c6c":function(t,e,r){},"5dbc":function(t,e,r){var a=r("d3f4"),n=r("8b97").set;t.exports=function(t,e,r){var o,i=e.constructor;return i!==r&&"function"==typeof i&&(o=i.prototype)!==r.prototype&&a(o)&&n&&n(t,o),t}},6743:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"余数拼箱",visible:t.AbnormalReport,width:"50%","append-to-body":"true"},on:{"update:visible":function(e){t.AbnormalReport=e}}},[t._l(t.dataSource,function(e,a,n){return r("div",{key:e},[r("el-card",{key:n,staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("品番："+t._s(a)+"，单位包装数："+t._s(e[0].F_102))]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[t._v("操作按钮")])],1),r("div",{staticClass:"text item"},[r("el-table",{ref:a,refInFor:!0,staticStyle:{width:"100%"},attrs:{data:e}},[r("el-table-column",{attrs:{prop:"FBillNo2",label:"检验单号",width:"250"}}),r("el-table-column",{attrs:{prop:"BatchNum",label:"批次号",width:"250"}}),r("el-table-column",{attrs:{align:"center",prop:"FYSQty",label:"余数",width:"80"}}),r("el-table-column",{attrs:{align:"center",label:"挑货",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-form",{ref:"scope.row",refInFor:!0,attrs:{model:e.row}},[r("el-form-item",[r("div",{on:{click:function(r){return t.DigitalOpen(e.$index,e.row,e.row.PS)}}},[r("el-input",{attrs:{placeholder:""},model:{value:e.row.PS,callback:function(r){t.$set(e.row,"PS",r)},expression:"scope.row.PS"}})],1)])],1)]}}],null,!0)}),r("el-table-column",{attrs:{prop:"SY",align:"center",label:"剩余"}})],1)],1)])],1)}),r("div",{staticStyle:{"text-align":"right","padding-top":"25px"}},[r("el-button",{attrs:{type:"success"},on:{click:function(e){return t.onSubmit("OK")}}},[t._v("确认")]),r("el-button",{on:{click:function(e){t.AbnormalReport=!1}}},[t._v("取消")])],1),r("Digital",{ref:"Digital",on:{DigitalCallback:t.DigitalCallback}})],2)},n=[],o=(r("c5f6"),r("ac6a"),r("c4bb")),i={name:"LCL",components:{Digital:function(){return r.e("chunk-2d0be698").then(r.bind(null,"2fc1"))}},data:function(){return{loading:!1,AbnormalReport:!1,dataSource:{}}},methods:{getSummaries:function(t){var e=t.columns,r=t.data,a=[];return e.forEach(function(t,e){if(0!==e){var n=r.map(function(e){return Number(e[t.property])});n.every(function(t){return isNaN(t)})?a[e]="":(a[e]=n.reduce(function(t,e){var r=Number(e);return isNaN(r)?t:t+e},0),a[e]+=""),1!==e&&2!==e||(a[e]="")}else a[e]="合计"}),a},DigitalOpen:function(t,e,r){var a={width:"30%",num:r,title:"拼箱数量",placeholder:"拼箱数量"+r,tmp:e,index:t};this.$refs.Digital.show(a)},DigitalCallback:function(t){var e=this;this.$nextTick(function(){var r=1*e.dataSource[t.tmp.FItemName][t.index].FYSQty<1*t.num?1*e.dataSource[t.tmp.FItemName][t.index].FYSQty:1*t.num;e.dataSource[t.tmp.FItemName][t.index].PS=r,e.dataSource[t.tmp.FItemName][t.index].SY=e.dataSource[t.tmp.FItemName][t.index].FYSQty-e.dataSource[t.tmp.FItemName][t.index].PS,e.dataSource[t.tmp.FItemName][t.index].FYSQty++,e.dataSource[t.tmp.FItemName][t.index].FYSQty--}),this.$refs.Digital.hide()},show:function(t){this.AbnormalReport=!0,this.dataSource={},console.log(t);for(var e=0;e<t.length;e++){var r=t[e];r.PS=0,r.SY=r.FYSQty,this.dataSource[r.FItemName]?this.dataSource[r.FItemName].push(r):this.dataSource[r.FItemName]=[r]}},hide:function(){this.AbnormalReport=!1},onSubmit:function(t){var e=this,r=this;switch(t){case"OK":break;default:break}var a=[];for(var n in this.dataSource){var i={};i.key=n,i.ZS=0,this.dataSource[n].forEach(function(t){i.BZS=t.F_102,t.PS>0&&(i.ZS+=t.PS)}),a.push(i)}var c=!0;if(a.forEach(function(t){if(t.PS<t.ZS)return e.$notify.error({title:"系统提示",message:t.key+"的拼箱数量合计不是整箱"}),void(c=!1);console.log(t.ZS%t.BZS),t.ZS%t.BZS!==0&&(e.$notify.error({title:"系统提示",message:t.key+"的拼箱数量合计不是整箱"}),c=!1)}),c){this.loading=!0;var l=[];i={lclMxCreateInput:[]};for(var n in this.dataSource)this.dataSource[n].forEach(function(t){t.PS>0&&i.lclMxCreateInput.push({ICMOInspectBillId:t.FID,SpelledQty:t.PS})});0!==i.lclMxCreateInput.length?(l.push(i),Object(o["b"])("RemainderLCL/Create",l).then(function(t){console.log(t),e.$notify({title:"系统提示",message:"修改成功",type:"success"}),r.$emit("addSuccess"),e.hide(),e.loading=!1}).catch(function(){this.loading=!1})):this.$notify.error({title:"系统提示",message:"请选择拼箱数量"})}}}},c=i,l=(r("b64a"),r("2877")),u=Object(l["a"])(c,a,n,!1,null,null,null);e["default"]=u.exports},"8b97":function(t,e,r){var a=r("d3f4"),n=r("cb7c"),o=function(t,e){if(n(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:a(t,r),t}}({},!1):void 0),check:o}},9093:function(t,e,r){var a=r("ce10"),n=r("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,n)}},aa77:function(t,e,r){var a=r("5ca1"),n=r("be13"),o=r("79e5"),i=r("fdef"),c="["+i+"]",l="​",u=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),f=function(t,e,r){var n={},c=o(function(){return!!i[t]()||l[t]()!=l}),u=n[t]=c?e(p):i[t];r&&(n[r]=u),a(a.P+a.F*c,"String",n)},p=f.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(s,"")),t};t.exports=f},b64a:function(t,e,r){"use strict";var a=r("2c6c"),n=r.n(a);n.a},c5f6:function(t,e,r){"use strict";var a=r("7726"),n=r("69a8"),o=r("2d95"),i=r("5dbc"),c=r("6a99"),l=r("79e5"),u=r("9093").f,s=r("11e9").f,f=r("86cc").f,p=r("aa77").trim,d="Number",m=a[d],h=m,b=m.prototype,S=o(r("2aeb")(b))==d,v="trim"in String.prototype,g=function(t){var e=c(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():p(e,3);var r,a,n,o=e.charCodeAt(0);if(43===o||45===o){if(r=e.charCodeAt(2),88===r||120===r)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+e}for(var i,l=e.slice(2),u=0,s=l.length;u<s;u++)if(i=l.charCodeAt(u),i<48||i>n)return NaN;return parseInt(l,a)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof m&&(S?l(function(){b.valueOf.call(r)}):o(r)!=d)?i(new h(g(e)),r,m):g(e)};for(var y,N=r("9e1e")?u(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;N.length>I;I++)n(h,y=N[I])&&!n(m,y)&&f(m,y,s(h,y));m.prototype=b,b.constructor=m,r("2aba")(a,d,m)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-0bb36b2b.5cbb1dd0.js.map